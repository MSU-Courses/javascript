# Объекты `Map` и `Set`

Часто Вам придется работать с такими объектами, как `Map` и `Set`.

## Объект `Map`

> [!IMPORTANT]
> `Map` представляет собой коллекцию пар ключ/значение, подобно объекту. Однако основное различие заключается в том, что `Map` позволяет использовать в качестве ключей любые типы данных.

### Методы и свойства `Map`

- `new Map()` – создает коллекцию.
- `map.set(key, value)` – добавляет в коллекцию элемент с ключом `key` и значением `value`.
- `map.get(key)` – возвращает значение, соответствующее ключу `key`, или `undefined`, если ключ `key` отсутствует.
- `map.has(key)` – возвращает `true`, если ключ `key` присутствует в коллекции, в противном случае возвращает `false`.
- `map.delete(key)` – удаляет элемент (пару "ключ/значение") по ключу `key`.
- `map.clear()` – удаляет все элементы из коллекции.
- `map.size` – возвращает текущее количество элементов в коллекции.

Рассмотрим примеры использования методов.

```js
let myMap = new Map();

myMap.set('apple', 10);
myMap.set('banana', 20);
myMap.set('orange', 15);

console.log(myMap);
// Вывод:
// Map(3) {"apple" => 10, "banana" => 20, "orange" => 15}
```

```js
console.log(myMap.get('banana')); // Вывод: 20
console.log(myMap.get('grape')); // Вывод: undefined
```

```js
console.log(myMap.has('banana')); // Вывод: true
console.log(myMap.has('grape')); // Вывод: false
```

### Перебор `Map`

Для перебора коллекции Map существуют 3 метода:

- `map.keys()` – возвращает итерируемый объект, содержащий ключи.
- `map.values()` – возвращает итерируемый объект, содержащий значения.
- `map.entries()` – возвращает итерируемый объект, содержащий пары вида [ключ, значение]. Этот вариант используется по умолчанию в цикле `for..of`.

```js
let myMap = new Map();
myMap.set('apple', 10);
myMap.set('banana', 20);
myMap.set('orange', 15);

// Перебор ключей
for (let key of myMap.keys()) {
    console.log(key);
}

// Перебор значений
for (let value of myMap.values()) {
    console.log(value);
}

// Перебор пар ключ-значение
for (let entry of myMap.entries()) {
    console.log(entry);
}

// Использование деструктуризации для перебора пар ключ-значение
for (let [key, value] of myMap) {
    console.log(key, value);
}
```

### Преимущества `Map`

1. **Любые типы ключей**: В отличие от объектов, где ключами могут быть только строки или символы, Map позволяет использовать в качестве ключей любые типы данных, включая объекты, функции или примитивные значения.

2. **Порядок итерации**: Элементы в Map сохраняются в том порядке, в котором они были добавлены. В объектах порядок свойств может быть неопределенным и зависеть от реализации JavaScript-движка.

3. **Легкость очистки**: Для удаления всех элементов из Map можно использовать метод `clear()`, в то время как в объектах для этого придется перебирать все свойства и удалять их по отдельности.

4. **Легкость определения размера**: Свойство `size` в Map предоставляет простой способ получения количества элементов, в то время как в объектах приходится использовать цикл или другие методы для подсчета свойств.

5. **Управление памятью**: Map лучше подходит для кэширования больших объемов данных или временных значений, так как он может быть очищен с помощью метода `clear()`, что упрощает управление памятью.

## Объект `Set`

> [!IMPORTANT]
> Объект `Set` представляет собой специальный тип коллекции, известный как "множество", который хранит уникальные значения (без ключей), где каждое значение может появляться только один раз.

То есть, можно провести аналогию с массивом, где каждое уникальное значение может встречаться только один раз.

### Методы и свойства `Set`

Конечно, вот ваш список:

- `new Set(iterable)`: создает Set, и если в качестве аргумента был предоставлен итерируемый объект (обычно это массив), то копирует его значения в новый Set.
- `set.add(value)`: добавляет значение (если уникальное значение уже есть, то ничего не делает), возвращает тот же объект `set`.
- `set.delete(value)`: удаляет значение, возвращает true, если value было в множестве на момент вызова, иначе false.
- `set.has(value)`: возвращает true, если значение присутствует в множестве, иначе false.
- `set.clear()`: удаляет все имеющиеся значения.
- `set.size`: возвращает количество элементов в множестве.

Рассмотрим несколько примеров,

```js
// Создаем новый объект Set
let uniqueNumbers = new Set();

// Добавляем элементы в Set
uniqueNumbers.add(1);
uniqueNumbers.add(2);
uniqueNumbers.add(3);
uniqueNumbers.add(2); // Дубликат будет проигнорирован

console.log(uniqueNumbers); // Set(3) { 1, 2, 3 }

// Проверяем наличие элемента в Set
console.log(uniqueNumbers.has(2)); // Вывод: true
console.log(uniqueNumbers.has(4)); // Вывод: false
```

```js
// Создаем объект Set для уникальных адресов электронной почты подписчиков
let emailSubscribers = new Set();

// Добавляем новых подписчиков
emailSubscribers.add('example1@example.com');
emailSubscribers.add('example2@example.com');
emailSubscribers.add('example1@example.com'); // Дубликат будет проигнорирован

// Отправляем рассылку только уникальным подписчикам
emailSubscribers.forEach(email => {
    console.log("Отправляем сообщение на адрес:", email);
});

```