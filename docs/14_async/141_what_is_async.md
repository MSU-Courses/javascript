# Что такое асинхронность?

Для понимания концепта асинхронности, необходимо понять, что такое синхронное выполнение кода.

## Синхронное выполнение кода

Выполнение JS кода - однопоточное. Это означает, что в любой момент времени JavaScript может выполнить только одну строку кода.
Таким образом, вторая строка кода не будет выполнена, пока не выполнена первая. 

```js
console.log("Hello"); // сначала данная строка
console.log("World"); // потом данная строка
```

Данное выполнение кода называется **синхронным**.

**А есть ли минусы синхронного кода?**

Синхронный код замедляет выполнение программы. **Например**, если нужно подождать 4 секунды, весь код будет остановлен на это время, не делая ничего полезного. Это может сделать программу медленной и менее отзывчивой для пользователей.

## Асинхронное выполнение кода

А что значит асинхронное выполнение кода?

Как Вы могли догадаться, простыми словами, **асинхронное выполнение кода** означает, что программный код может делать несколько вещей одновременно, вместо того чтобы ждать, пока одна задача закончится, прежде чем начать другую. Это помогает программам быть быстрее и отзывчивее.

Давайте рассмотрим пример. Рассмотрим функцию `setTimeout`, которая позволяет выполнить определенный код через заданное время.
```javascript
setTimeout(function() {
    console.log("Hello, world!");
}, 5000);
console.log("Hi!");

// Hi
// Hello, world!
```

В этом коде мы используем функцию `setTimeout`, которая:
1. Выполняет переданную ей функцию через указанный период времени (в данном случае 5000 миллисекунд, то есть 5 секунд). 
2. После вызова `setTimeout`, программа продолжит выполнение остального кода без ожидания завершения работы функции, переданной в `setTimeout`.
3. Поэтому сначала на экран будет выведено: **"Hi"**, а потом **"Hello, World"**.

Но почему же это происходит, если мы утверждали ранее, что JavaScript-код выполняется синхронно и последовательно, строчка за строчкой?

На самом деле, функция `setTimeout` не является встроенной частью самого языка JavaScript. Это функция, предоставляемая средой выполнения, в которой работает ваш код.

Например, в веб-браузере `setTimeout` реализована через механизм `Web API` — это набор встроенных возможностей браузера (таймеры, обработка событий, сетевые запросы и т.д.), который работает вне основного потока JavaScript. Именно `Web API` берёт на себя управление асинхронными задачами, такими как таймеры, интервалы и события, и возвращает результаты обратно в JavaScript через Event Loop.

JavaScript остаётся однопоточным и исполняет код последовательно, строчка за строчкой. Когда вызывается асинхронная функция (например, setTimeout), она регистрируется во внешней среде (в Web API браузера), и основной поток продолжает выполнение. После завершения асинхронной операции результат попадает в очередь задач и будет обработан, когда стек вызовов освободится.

В Node.js аналогичную роль выполняет библиотека libuv. Она реализует неблокирующие операции — такие как работа с файлами, сетевыми соединениями и таймерами. Хотя в Node.js нет Web API, он использует собственный механизм на основе данной библиотеки, чтобы обрабатывать асинхронные задачи.