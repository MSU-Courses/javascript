# Управление потоком выполнения

> [!NOTE]
> `Управление потоком выполнения` - это концепция, позволяющая программно контролировать порядок выполнения инструкций в программе.

В данной главе мы рассмотрим основные **условные конструкции** и **циклы** в языке JS.

Множество конструкций, таких как `if`, `switch`, `for`, `while`, вам уже знакомы из опыта работы с C++.

## Условная конструкция `if`

> [!IMPORTANT]
> Инструкция `if`  используется для выполнения определенного блока кода, если указанное условие истинно.

```js
if (условие) {
    // Блок кода, который будет выполнен, если условие истинно
}

// например
const age = 18;
if (age >= 18) {
    alert("Поздравляю, Вам есть 18 лет!");
}
```

> [!NOTE]
> Инструкция if в JavaScript вычисляет выражение в скобках и преобразует его результат к логическому типу. Согласно правилам преобразования типов:
> 1. Число 0, пустая строка "", null, undefined и NaN считаются "ложными" (false) значениями
> 2. Остальные значения считаются "правдой" (true)

Для наглядности рассмотрим несколько примеров.
```js
// Пример №1
const age = undefined; // предположим, что пользователь не ввел свой возраст.
if (!age) { // не нужно писать if (age !== undefined)
    alert("Введите свой возраст");
    return;
}

// Пример №2
const isAdmin = false; // предположим, что текущий пользователь не является администратором
if (!isAdmin) {
    console.log("Доступ запрещен! Требуются права администратора.");
    return;
}
```

### Блок `else` и `if else`

Как и в C++ в JS присутствуют конструкции `else` и `if else`.

Блок else в инструкции if позволяет выполнить определенный блок кода, когда условие в инструкции if оценивается как ложное. 

```js
const age = 18;
if (age < 18) {
    alert("Вы несовершеннолетний");
} else if (age >= 18 && age < 21) {
    alert("Вы совершеннолетний, но еще не достигли совершеннолетия по закону.");
} else {
    alert("Вы точно совершеннолетний.");
}
```

## Тернарный оператор

> [!IMPORTANT]
> **Тернарный оператор в JavaScript** - это альтернативный способ написания условного выражения, который позволяет сократить код при необходимости выполнения простых условных операций.

Хоть мы и рассматривали операторы в [прошлой главе](25_operators.md), тем не менее данный оператор, известный как "тернарный оператор", представляет собой специальную конструкцию, которая позволяет сократить код при необходимости выполнения простых условных операций.

Синтаксис оператора `условие ? выражение1 : выражение2`. Он проверяет условие. Если условие истинно, возвращается значение выражения1, иначе - значение выражения2.

Например,
```js
// Пример №1
const age = 20;
const message = (age >= 18) ? "Совершеннолетний" : "Несовершеннолетний";
alert(message);

// Пример №2
const age = undefined; // пользователь не ввел возраст
const message = age ? (age > 18 ? "Совершеннолетний" : "Несовершеннолетний") : "Возраст неопределен";
// Если age определен, то проверяется, больше ли age 18. 
// Если это так, то message присваивается строка "Совершеннолетний", иначе - "Несовершеннолетний".
alert(message);
```

## Условная конструкция `switch`

> [!IMPORTANT]
> Оператор `switch` в JavaScript позволяет выбирать различные варианты выполнения кода на основе значения выражения.

Синтаксис конструкции.
```js
switch (выражение) {
  case значение1:
    // код, выполняемый при совпадении с значение1
    [break];
  case значение2:
    // код, выполняемый при совпадении с значение2
    [break];
  ...
  default:
    // код, выполняемый, если ни одно значение не совпало
}
```

Например.
```js
let age = 18;
switch (age) {
    case 1:
        alert("Вам всего годик!");
        break;
    case 10: 
        alert("Вам уже 10! Юбилей!");
        break;
    default:
        alert("Вы нам не подходите, вам не годик и не 10 лет!");
}
// будет выведено: Вы нам не подходите, вам не годик и не 10 лет!
```

> [!CAUTION]
> Если break нет, то выполнение пойдёт ниже по следующим case, при этом остальные проверки игнорируются.

```JS
let fruit = "apple";
let message = "";

switch (fruit) {
  case "banana":
    message += "It's a banana";
  case "apple":
    message += "It's an apple"; // При совпадении с "apple" выполнится этот код...
  case "orange":
    message += "It's an orange"; // ...и этот код...
  default:
    message += "Unknown fruit"; // ...и этот код тоже
}

console.log(message); // Результат: "It's an appleIt's an orangeUnknown fruit"
```

## Цикл `for`

Один из самых распространенных циклов - `for`. Существует теория, что можно программировать, используя только его. Однако в некоторых случаях это может быть не слишком удобным. **А вы пользовались им в других языках программирования?**.

**Синтаксис** цикла в JS.
```js
for (начало; условие; шаг) {
  // ... тело цикла ...
}
```

Например,
```js 
const MAX_VALUE = 10;
for (let i = 0; i <= MAX_VALUE; i++) {
    console.log(i);
}
```

### Пропуск частей `for`

Иногда есть необходимость пропускать некоторые части оператора `for`.

Например,
```js
// Пример №1
let i = 0; // начальное значение i задается вне цикла
for (; i < 5; i++) {
    console.log(i);
}

// Пример №2
for (;;) {
    // бесконечный цикл
    // цикл будет выполняться бесконечно, так как условие всегда истинно (true). 
    // Такой подход часто используется в программировании
    // например, для ожидания пользовательского ввода 
    // или для непрерывной работы приложения в режиме ожидания.
}
```

### Ключевые слова break/continue

Ключевые слова `break` и `continue` широко используются вместе с циклом `for`.

* Ключевое слово `break` используется в циклах для немедленного завершения выполнения цикла и перехода к следующей инструкции после цикла.
* Ключевое слово `continue` используется в циклах для пропуска текущей итерации цикла и перехода к следующей итерации.

Рассмотрим пример с ключевым словом **continue**
```js
// Блок кода без использования continue
for (let i = 0; i < 5; i++) {
    // Если i четное, выводим i + 1
    if (i % 2 === 0) {
        console.log(i + 1);
    } else {
        // Если i нечетное, выводим i - 1
        console.log(i - 1);
    }
}

// Блок кода с использованием continue
for (let i = 0; i < 5; i++) {
    // Если i четное, выводим i + 1 и пропускаем остальные операции
    // так как в них нет смысла
    if (i % 2 === 0) {
        console.log(i + 1);
        continue;
    }
    // Если i нечетное, выводим i - 1
    console.log(i - 1);
}
```

Рассмотрим пример с ключевым словом **break**
```js
// Задача: найти первый нечетный элемент массива
const arr = [4, 4, 8, 9, 3];
let firstOdd;

// Блок кода без использования break
let flag = true; //  Переменная-флаг, чтобы найти только первый нечетный элемент
for (let i = 0; i < 5; i++) {
    if (arr[i] % 2 !== 0) {
        if (flag) { // Если первый нечетный элемент еще не найден
            firstOdd = arr[i]; // Присвоить первый нечетный элемент переменной firstOdd
            flag = false; // Пометить, что первый нечетный элемент найден
        }
    }
}

// Блок кода с использованием ключевого слова break
for (let i = 0; i < 5; i++) {
    if (arr[i] % 2 !== 0) {
        firstOdd = arr[i]; // Присвоить первый нечетный элемент переменной firstOdd
        break; // Прервать выполнение цикла, так как первый нечетный элемент уже найден
    }
}
```

## Цикл `while`

> [!IMPORTANT]
> Цикл `while` в JavaScript выполняет блок кода, пока условие, указанное в скобках, остается истинным.

**Синтаксис** цикла в JS.
```js
while (condition) {
    // тело цикла
}
```

Например.
```js
// Пример №1
let i = 0;
while (i <= 5) {
    console.log(i);
    i++;
}


// Пример №2
// Часто используется для бесконечных циклов
while (true) {
    // тело цикла
}
```

## Цикл `do ... while`

> [!IMPORTANT]
> Цикл `do...while` в JavaScript похож на цикл while, за исключением того, что он проверяет условие после выполнения блока кода, что гарантирует, что **блок кода выполнится хотя бы один раз**. 

**Синтаксис** цикла в JS.
```js
do {
    // тело цикла
} while(condition);
```

Например.
```js
let count = 0;
// Сначала выполнится блок кода внутри do
// А только потом будет проверено условие count < 5
do {
    console.log("Count is: " + count);
    count++;
} while (count < 5);
```