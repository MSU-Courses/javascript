# Функции

Функции играют ключевую роль в языке программирования JavaScript, обеспечивая модульность, повторное использование кода и организацию программного кода в более управляемые блоки.

Можно ли обойтись без них, спросите Вы? Ответ очевиден: нельзя!

При работе над программами часто возникает необходимость повторять один и тот же фрагмент кода в разных частях программы. Именно для таких ситуаций и используются функции. Они позволяют избежать дублирования кода, делая его более компактным и удобным для поддержки.

Кроме того, функции могут служить для выделения и разделения определенных логических блоков, что делает программу более структурированной и понятной для разработчика

Учитывая ваш опыт работы с функциями в C++ и знакомство с некоторыми функциями в JavaScript (например, `alert()`, `prompt()` и другие), вы уже знаете некоторые их аспекты. Тем не менее, в JavaScript функции могут проявлять себя по-другому и даже сбивать с толку опытных разработчиков.

## Когда нужны функции?

Как было сказано выше, существует в основном две причины, когда мы выносим код в функцию.
1. Избежание повторного использования кода и обеспечение его переиспользования в различных частях программы.
2. Повышение читаемости и поддерживаемости кода.

Рассмотрим каждую из ситуаций.

**Ситуация №1**. 

Рассмотрим на примере вычисления площади круга.
```js
// Плохой способ: повторение кода

// Файл: index.js
let circleRadius = 5;
let circleArea = Math.PI * circleRadius ** 2;
console.log("Площадь круга:", circleArea1);

// Файл: calculate.js
let circleRadius = 10;
let circleArea = Math.PI * circleRadius ** 2;
console.log("Площадь круга:", circleArea1);

// т.е. в разных частях программы мне переписывать один и тот же код
```
```js
// Хороший способ: использование функций для повторяющихся операций

// Функция для вычисления площади круга
function calculateCircleArea(radius) {
    return Math.PI * radius ** 2;
}

// Файл: index.js
let circleRadius = 5;
console.log("Площадь круга:", calculateCircleArea(5));

// Файл: calculate.js
let circleRadius = 5;
console.log("Площадь круга:", calculateCircleArea(5));
```

**Ситуация №2**.

Рассмотрим на примере вычисления суммы элементов массива
```js
// Плохой способ, особенно если Ваш проект большой
let numbers = [1, 2, 3, 4, 5];
let sum = 0;
for (let i = 0; i < numbers.length; i++) {
    sum += numbers[i];
}
console.log(sum);
```
```js
// Хороший способ
function calculateSum(array) {
    let sum = 0;
    for (let i = 0; i < array.length; i++) {
        sum += array[i];
    }
    return sum;
}

let numbers = [1, 2, 3, 4, 5];
console.log(calculateSum(numbers));
```
Данная ситуация (№2) более подходит для крупных проектов с большим объемом кода. Однако, если вы работаете с небольшим js файлом, использование функций иногда может усложнить понимание.

## Объявление функции

Объявление функции состоит из следующих частей:
* Ключевого слова `function`
* Списка параметров
* Тела функции: инструкций (кода), заключенных между фигурными скобками `{ }`.

Для того чтобы **объявить функцию**, используется следующий синтаксис:
```js
function functionName(arg1, arg2, ..., argN) {
    // тело функции
}
```

Например,
```js
// функция без параметров
function printHelloWorld() {
    console.log("Hello, world!");
}

// функция с параметрами
function sum(a, b) {
    return a + b;
}
```

## Область видимости переменных функции

Из главы [Переменные](../2_basics/22_variables.md) вам известно, что переменные могут быть локальные и глобальные.

Переменные, объявленные внутри функции, видны только в этой функции и считаются локальными.
```js
function sum(arr) {
    let sum; // видна только в пределах функции 
    // ...
}
console.log(sum); // ошибка
```

Переменные, объявленные вне функции, доступны внутри этой функции. Она имеет возможность изменять их значение.
```js
let color = "blue";

// Функция printColor выводит значение переменной color в консоль.
function printColor() {
    console.log(color);
}

// Функция changeColor принимает новый цвет в качестве аргумента
// и изменяет значение глобальной переменной color.
function changeColor(newColor) {
    color = newColor;
}
```

Если в функции указана одноименная локальная переменная, то она перекрывает значение глобальной переменной с тем же именем внутри функции.
```js
let color = "blue";

function printDefaultColor() {
    let color = "red";
    console.log(color); // red
}
```

> [!IMPORTANT]
> Использование глобальных переменных **не является хорошей практикой**, так как они могут привести к конфликтам имён, затруднить отслеживание и управление состоянием приложения, а также сделать код менее читаемым и поддерживаемым.