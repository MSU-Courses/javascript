# Деструктуризация массивов

Для полного понимания некоторых методов массивов важно осознать, что такое деструктуризация массивов.

## Что такое деструктуризация?

Начнем с простого: необходимо разобраться в понятии деструктуризации. Понимание этого концепта поможет нам лучше
постигнуть основную цель данной темы.

Слово "**деструктуризация**" происходит от латинского корня "de-", который означает "разъединение" или "разрушение".
Другими словами, это процесс разъединения какой-либо структуры.

Допустим, рассмотрим данное слово в другой, более простой области. Например, когда вы приобретаете букет цветов, а затем
разбираете его на отдельные цветы, чтобы использовать их для составления более креативного и уникального букета, либо
для украшения различных частей дома.

Вернемся к JavaScript и применим данное понятие здесь.

## Деструктуризация в JS

> [!IMPORTANT]
> **Деструктуризация** — это процесс извлечения данных из структуры, будь то массив, объект или другой составной тип
> данных, и присвоение их отдельным переменны.

Массив представляет собой одну из структур данных, поэтому мы можем провести его деструктуризацию, то есть разобрать на
отдельные элементы. Подробнее о деструктуризации других структур данных мы рассмотрим позже.

Иными словами, мы можем присвоить элементы массива отдельным переменным.

### Использование деструктуризации

```js
const arr = ["Hello", "World"];

// Деструктуризация массива: значение "Hello" присваивается переменной hello
// а значение "World" - переменной world
const [hello, world] = arr;

console.log(hello); // Hello
console.log(world); // World
```

Теперь мы можем использовать переменные `hello` и `world` в коде.

> [!NOTE]
> Важно отметить, что деструктуризация не приводит к удалению массива, после этой операции мы можем продолжить
> использовать массив так же, как и раньше.

### Пропуск элементов при деструктуризации

Если вам требуется извлечь только первые N элементов из массива, при деструктуризации просто укажите количество
переменных, соответствующее количеству элементов, которые вы хотите извлечь.

```js
const arr = [1, 2, 3, 4, 5];
const [a, b, c] = arr;
console.log(a, b, c); // 1 2 3
```

Если вам нужно пропускать определенные элементы при деструктуризации, вы можете пропустить их, добавив дополнительные
запятые.

```js
const arr = ["Andrei", "Ivanov", 23];

// Пропускаем второй элемент массива
const [name, , age] = arr;

console.log(name); // Andrei
console.log(age); // 23
```

Такой подход позволяет извлекать только нужные элементы из массива, игнорируя необходимость присвоения значений
элементам, которые вам не нужны.

### Дополнительные свойства деструктуризации

Мы можем применять деструктуризацию не только при объявлении переменных, но и в любом другом участке программы.

```js
let a, b;
let arr = [1, 2, 3];
[a, b] = arr;
console.log(a, b); // 1 2
```

## Обмен переменных

С помощью деструктуризации можно воспользоваться "лайфхаком", который позволяет быстро поменять местами значения
переменных.

```js
let a = 3;
let b = 4;

// Меняем значения переменных местами с помощью деструктуризации 
// В этой строке мы создаем новый массив с двумя элементами:
// - первый элемент - это значение переменной b
// - второй элемент - значение переменной a.
// Таким образом, переменная a получает значение b, а переменная b получает значение a.
[a, b] = [b, a];
console.log(a, b); // 4 3
```

## Остаточные параметры

Мы уже упоминали остаточные параметры при обсуждении функций. Помните что это?

Поскольку аргументы функции представлены в виде массива, то мы уже понимаем, как работают остаточные параметры при
деструктуризации массивов.

Если мы хотим получить не только первые N значений, но и остальные в виде отдельного массива, мы можем использовать
оператор `...` (spread-оператор).

```js
const arr = [1, 2, 3, 4, 5, 6, 7];
let [a, b, ...other] = arr;
console.log(a, b); // 1 2
console.log(other); // [4, 5, 6, 7]
```

## Значения по умолчанию

Вспомним функции и значение по умолчанию.

При деструктуризации массивов мы также можем указывать значения по умолчанию.

```js
const user = ["Alexey"];

// Деструктуризация массива user
// - первый элемент присваивается переменной name, 
// - второй элемент - переменной surname. 
// Если элемент отсутствует, используются значения по умолчанию.
const [name = "Guest", surname = "Unknown"] = user;
console.log(name); // Alexey
console.log(surname); // Unknown
```

Что произойдет, если не указать значения по умолчанию? Уже догадались? Будет значение `undefined`.

```js
const user = ["Alexey"];
const [name, surname] = user; // Не указываем значения по умолчанию
console.log(user); // "Alexey"
console.log(surname); // Undefined
```

## Оператор расширения (spread-оператор)

Выше мы рассмотрели как мы можем использовать оператор `...` при деструктуризации массивов.

Оператор `"..."` в JavaScript называется оператором расширения (spread operator). Он позволяет развернуть итерируемый
объект.

В данном контексте **"развернуть"** означает взять каждый элемент массива и использовать его как отдельный аргумент
или элемент, а не как часть массива.

```js
const arr = ["hello", "world"];

// Распаковка массива и вывод его элементов на консоль
// Выводим элементы массива как два отдельных элемента, а не как целый массив
console.log(...arr); // hello world
```

Рассмотрим пару примеров, где это может использоваться:

* Расширение массива

```js
const arr1 = [1, 2, 3];
const arr2 = [4, 5, 6];

// Без использования оператора ...
const arrayWithoutOperator = [arr1, arr2];
// Выведет: [[1, 2, 3], [4, 5, 6]]
console.log(arrayWithoutOperator);

// С использованием оператора ...
const arrayWithOperator = [...arr1, ...arr2];
// Выведет: [1, 2, 3, 4, 5, 6]
console.log(arrayWithOperator);
```

* Создание копии массива

```js
const arr = [1, 2, 3];

// Без использования оператора ...
const arrayWithoutOperator = [arr];
// Выведет: [[1, 2, 3]] (массив в массиве)
console.log(arrayWithoutOperator);

// С использованием оператора ...
const arrayWithOperator = [...arr];
// Выведет: [1, 2, 3]
console.log(arrayWithOperator);
```

* Создание нового массива с добавлением элемента

```js
const arr = [1, 2, 3];

// Без использования оператора ...
const arrayWithoutOperator = [arr, 4];
// Выведет: [[1, 2, 3], 4]
console.log(arrayWithoutOperator);

// С использованием оператора ...
const arrayWithOperator = [...arr, 4];
// Выведет: [1, 2, 3, 4]
console.log(arrayWithOperator);
```

* Передача аргументов функции

```js
function sum(a, b, c) {
    return a + b + c;
}

const numbers = [1, 2, 3];

// Эленты массива передаются как отдельные аргументы функции
sum(...numbers);
// Эквивалентно вызову функции sum(1, 2, 3);
```

> [!TIP]
> **Spread-оператор** применяется не только к массивам, но и к другим типам данных, таких как объекты и др. Мы
> рассмотрим это более подробно, когда будем изучать соответствующую тему.

## Примеры использования

Рассмотрим несколько примеров использования.

### Пример №1

```js
/**
 * Генерирует массив случайных чисел заданной длины.
 * @param {number} length - Длина массива случайных чисел.
 * @returns {number[]} - Массив случайных чисел.
 */
function getRandomNumbers(length) {
    const numbers = [];
    for (let i = 0; i < length; i++) {
        numbers.push(Math.random());
    }
    return numbers;
}

const [firstNumber, secondNumber, thirdNumber] = getRandomNumbers(3);
console.log(firstNumber, secondNumber, thirdNumber); // выводит три случайных числа
```

### Пример №2

```js
/**
 * Вычисляет общую и среднюю суммы переданных числовых аргументов.
 * @param {...number} nums - Числовые аргументы.
 * @returns {number[]} - Массив, содержащий общую и среднюю суммы.
 */
function calculateSumAndAverage(...nums) {
    // Вычисление суммы
    const totalSum = nums.reduce((acc, curr) => acc + curr, 0);

    // Вычесление среднего арифметического
    const average = totalSum / nums.length;

    return [totalSum, average];
}

const [total, avg] = calculateSumAndAverage(10, 20, 30, 40, 50);
// Вывод: Total sum: 150, Average: 30
console.log(`Total sum: ${total}, Average: ${avg}`);
```

### Пример №3

Вы можете рассмотреть более сложный пример [здесь](../../samples/4_arrays/sample01.js).